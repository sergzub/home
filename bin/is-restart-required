#!/bin/bash -eu

readonly THIS_PATH="$(cd "$(dirname "$0")" && pwd)"

. "${THIS_PATH}/include.shh" "${THIS_PATH}/include"
IncludeSsh 'colors.shh'
IncludeSsh 'utils.shh'

if [ -f /var/run/reboot-required ]; then
    if [ -f /var/run/reboot-required.pkgs ]; then
        echo
        echo '======= Packages require reboot =========='
        cat /var/run/reboot-required.pkgs
        echo '=========================================='
    fi
    msg="$(cat /var/run/reboot-required)"
    cols=$((${#msg} + 2))
    echo ${MAGENTA}${TEXT_BOLD}
    printf '╔'; Repeat ${cols} '═'; printf '╗\n'
    printf '║ %s ║\n' "${msg}"
    printf '╚'; Repeat ${cols} '═'; printf '╝\n'
    echo ${SGR0}
    exit 0
else
    echo "┌────────────────────┐"
    echo "│ No need to restart │"
    echo "└────────────────────┘"
    exit 1
fi
