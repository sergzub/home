#!/bin/bash -eu

readonly SELF_PATH="$(readlink -e "$(dirname "$0")")"
readonly INCLUDE_SHH_PATH="${SELF_PATH}/include"
. "${SELF_PATH}/include-shh"

Include 'utils'

Main()
{
    if [ -f '/var/run/reboot-required' ]; then
        if [ -f '/var/run/reboot-required.pkgs' ]; then
            echo
            echo '======= Packages that require reboot =========='
            cat '/var/run/reboot-required.pkgs'
            echo '==============================================='
        fi
        local msg="$(cat /var/run/reboot-required)"
        local columns=$((${#msg} + 2))
        Out "<b><magenta>"
        local doubleLine=''
        RepeatToVar ${columns} '═' @doubleLine
        printf '╔%s╗\n' "${doubleLine}"
        printf '║ %s ║\n' "${msg}"
        printf '╚%s╝\n' "${doubleLine}"
        Out "</reset>"
        return 0
    else
        echo "┌───────────────────┐"
        echo "│ No need to reboot │"
        echo "└───────────────────┘"
        return 1
    fi
}

Main "$@"
